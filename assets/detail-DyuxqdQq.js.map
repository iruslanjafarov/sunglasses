{"version":3,"file":"detail-DyuxqdQq.js","sources":["../../src/entities/product/hooks/useProduct.ts","../../src/entities/product/ui/product.tsx","../../src/pages/detail/detail.tsx"],"sourcesContent":["import { useState, useEffect, useCallback } from 'react';\nimport { IProduct, IUseProduct } from '../model/types/product.ts';\nimport { useParams } from 'react-router';\nimport { useStore } from '@/app/providers/store.ts';\n\n/**\n * useProduct Hook\n *\n * A custom React hook for fetching product data from a remote API.\n * It manages the product data and loading state, fetching the product based on the `id` from the URL parameters.\n *\n * @hook\n * @returns {IUseProduct} Hook's state and methods.\n * @property {IProduct | undefined} product - The product data fetched from the API, or `undefined` if not yet available.\n * @property {boolean} loading - Indicates whether the data is being loaded.\n *\n * @throws {Error} Throws an error if the fetch request fails.\n */\n\nconst useProduct = (): IUseProduct => {\n\tconst { setProduct } = useStore();\n\tconst { id } = useParams();\n\n\tconst [loading, setLoading] = useState<boolean>(false);\n\n\t/**\n\t * Fetches product data from the API.\n\t *\n\t * This function fetches the product based on the provided `id` and updates the state accordingly.\n\t * If an error occurs, it sets `loading` to false and throws an error with a descriptive message.\n\t *\n\t * @async\n\t */\n\n\tconst fetchProducts = useCallback(async () => {\n\t\ttry {\n\t\t\tsetLoading(true);\n\n\t\t\tconst request = await fetch(\n\t\t\t\t`https://sweet-berry-detective.glitch.me/products/${id}`\n\t\t\t);\n\n\t\t\tconst data: IProduct = await request.json();\n\n\t\t\tsetProduct(data);\n\t\t\tsetLoading(false);\n\t\t} catch (error) {\n\t\t\tsetLoading(false);\n\n\t\t\tthrow new Error(\n\t\t\t\terror instanceof Error ? error.message : 'Unknown error occurred'\n\t\t\t);\n\t\t}\n\t}, [id, setProduct]);\n\n\tuseEffect(() => {\n\t\tfetchProducts();\n\t}, [fetchProducts]);\n\n\treturn { loading };\n};\n\nexport default useProduct;\n","import { FC } from 'react';\nimport useProduct from '../hooks/useProduct.ts';\nimport { AnimatePresence } from 'framer-motion';\nimport TransitionView from '@/shared/transitionView/transitionView.tsx';\nimport Spinner from '@/shared/spinner/spinner.tsx';\nimport FadeView from '@/shared/fadeView/fadeView.tsx';\nimport { useStore } from '@/app/providers/store.ts';\nimport { useParams } from 'react-router';\nimport Favorite from '@/features/favorite/ui/favorite.tsx';\n\n/**\n * Product\n *\n * This is a functional React component that displays a list of products, loading status, and product details.\n * It uses the `useProducts` hook to fetch the list of products from an API and manages the loading state.\n * While the products are being fetched, a loading spinner is shown. Once the products are loaded,\n * each product's image, name, and price are displayed in a grid layout.\n *\n * @component\n * @returns {JSX.Element} A JSX element representing the product list and loading spinner.\n */\n\nconst Product: FC = (): JSX.Element => {\n\tconst { product } = useStore();\n\tconst { loading } = useProduct();\n\tconst { path, name, price } = product || {};\n\n\tconst { id } = useParams();\n\tconst conditionalId = id ? +id : undefined;\n\n\treturn (\n\t\t<>\n\t\t\t<AnimatePresence>\n\t\t\t\t{loading && (\n\t\t\t\t\t<div className='w-full h-full absolute top-0 left-0 flex justify-center items-center'>\n\t\t\t\t\t\t<TransitionView>\n\t\t\t\t\t\t\t<Spinner />\n\t\t\t\t\t\t</TransitionView>\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\t\t\t</AnimatePresence>\n\n\t\t\t{product && !loading && (\n\t\t\t\t<div className='w-full h-full top-0 left-0 absolute flex justify-center items-center px-6'>\n\t\t\t\t\t<FadeView>\n\t\t\t\t\t\t<div className='relative'>\n\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\tsrc={path}\n\t\t\t\t\t\t\t\talt={name}\n\t\t\t\t\t\t\t\tclassName='w-full lg:w-auto lg:max-w-full h-auto mt-6 rounded-lg'\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className='flex justify-between mt-6'>\n\t\t\t\t\t\t\t<div className='relative flex gap-3'>\n\t\t\t\t\t\t\t\t<h2 className='text-xl truncate'>{name}</h2>\n\t\t\t\t\t\t\t\t<Favorite id={conditionalId} />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<h3 className='text-xl text-gray-400 text-nowrap'>{price} â‚½</h3>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</FadeView>\n\t\t\t\t</div>\n\t\t\t)}\n\t\t</>\n\t);\n};\n\nexport default Product;\n","import Product from '@/entities/product/ui/product';\n\n/**\n * Detail Component\n *\n * This is a functional React component that renders the `Product` component.\n * It is used to display detailed information about a product, typically by passing the product ID\n * through the route. The component is part of a dynamic route configuration (e.g., `/detail/:id`).\n *\n * @component\n * @returns {JSX.Element} A JSX element representing the detailed view of a product.\n */\n\nconst Detail = (): JSX.Element => {\n\treturn <Product />;\n};\n\nexport default Detail;\n"],"names":["useProduct","setProduct","useStore","id","useParams","loading","setLoading","useState","fetchProducts","useCallback","data","error","useEffect","Product","product","path","name","price","conditionalId","jsxs","Fragment","jsx","AnimatePresence","TransitionView","Spinner","FadeView","Favorite","Detail"],"mappings":"oIAmBA,MAAMA,EAAa,IAAmB,CAC/B,KAAA,CAAE,WAAAC,CAAW,EAAIC,EAAS,EAC1B,CAAE,GAAAC,CAAG,EAAIC,EAAU,EAEnB,CAACC,EAASC,CAAU,EAAIC,EAAAA,SAAkB,EAAK,EAW/CC,EAAgBC,EAAAA,YAAY,SAAY,CACzC,GAAA,CACHH,EAAW,EAAI,EAMT,MAAAI,EAAiB,MAJP,MAAM,MACrB,oDAAoDP,CAAE,EACvD,GAEqC,KAAK,EAE1CF,EAAWS,CAAI,EACfJ,EAAW,EAAK,QACRK,EAAO,CACf,MAAAL,EAAW,EAAK,EAEV,IAAI,MACTK,aAAiB,MAAQA,EAAM,QAAU,wBAC1C,CAAA,CACD,EACE,CAACR,EAAIF,CAAU,CAAC,EAEnBW,OAAAA,EAAAA,UAAU,IAAM,CACDJ,EAAA,CAAA,EACZ,CAACA,CAAa,CAAC,EAEX,CAAE,QAAAH,CAAQ,CAClB,ECtCMQ,EAAc,IAAmB,CAChC,KAAA,CAAE,QAAAC,CAAQ,EAAIZ,EAAS,EACvB,CAAE,QAAAG,CAAQ,EAAIL,EAAW,EACzB,CAAE,KAAAe,EAAM,KAAAC,EAAM,MAAAC,CAAM,EAAIH,GAAW,CAAC,EAEpC,CAAE,GAAAX,CAAG,EAAIC,EAAU,EACnBc,EAAgBf,EAAK,CAACA,EAAK,OAEjC,OAEEgB,EAAA,KAAAC,WAAA,CAAA,SAAA,CAAAC,MAACC,EACC,CAAA,SAAAjB,GACCgB,EAAAA,IAAA,MAAA,CAAI,UAAU,uEACd,SAACA,EAAAA,IAAAE,EAAA,CACA,SAACF,EAAA,IAAAG,EAAA,EAAQ,CACV,CAAA,CACD,CAAA,EAEF,EAECV,GAAW,CAACT,GACZgB,EAAA,IAAC,OAAI,UAAU,4EACd,gBAACI,EACA,CAAA,SAAA,CAACJ,EAAAA,IAAA,MAAA,CAAI,UAAU,WACd,SAAAA,EAAA,IAAC,MAAA,CACA,IAAKN,EACL,IAAKC,EACL,UAAU,uDAAA,CAAA,EAEZ,EACAG,EAAAA,KAAC,MAAI,CAAA,UAAU,4BACd,SAAA,CAACA,EAAAA,KAAA,MAAA,CAAI,UAAU,sBACd,SAAA,CAACE,EAAA,IAAA,KAAA,CAAG,UAAU,mBAAoB,SAAKL,EAAA,EACvCK,EAAAA,IAACK,EAAS,CAAA,GAAIR,CAAe,CAAA,CAAA,EAC9B,EACAC,EAAAA,KAAC,KAAG,CAAA,UAAU,oCAAqC,SAAA,CAAAF,EAAM,IAAA,CAAE,CAAA,CAAA,CAC5D,CAAA,CAAA,CAAA,CACD,CACD,CAAA,CAAA,EAEF,CAEF,ECnDMU,EAAS,UACNd,EAAQ,EAAA"}