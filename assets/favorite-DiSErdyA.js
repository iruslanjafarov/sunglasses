import{r as o,M as z,j as f,a as $,P as F,b as A,c as V,R as I,m as E}from"./index-BWLVPRxB.js";class B extends o.Component{getSnapshotBeforeUpdate(t){const n=this.props.childRef.current;if(n&&t.isPresent&&!this.props.isPresent){const s=this.props.sizeRef.current;s.height=n.offsetHeight||0,s.width=n.offsetWidth||0,s.top=n.offsetTop,s.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function D({children:e,isPresent:t}){const n=o.useId(),s=o.useRef(null),l=o.useRef({width:0,height:0,top:0,left:0}),{nonce:p}=o.useContext(z);return o.useInsertionEffect(()=>{const{width:m,height:r,top:d,left:c}=l.current;if(t||!s.current||!m||!r)return;s.current.dataset.motionPopId=n;const u=document.createElement("style");return p&&(u.nonce=p),document.head.appendChild(u),u.sheet&&u.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${m}px !important;
            height: ${r}px !important;
            top: ${d}px !important;
            left: ${c}px !important;
          }
        `),()=>{document.head.removeChild(u)}},[t]),f.jsx(B,{isPresent:t,childRef:s,sizeRef:l,children:o.cloneElement(e,{ref:s})})}const L=({children:e,initial:t,isPresent:n,onExitComplete:s,custom:l,presenceAffectsLayout:p,mode:m})=>{const r=$(T),d=o.useId(),c=o.useCallback(i=>{r.set(i,!0);for(const x of r.values())if(!x)return;s&&s()},[r,s]),u=o.useMemo(()=>({id:d,initial:t,isPresent:n,custom:l,onExitComplete:c,register:i=>(r.set(i,!1),()=>r.delete(i))}),p?[Math.random(),c]:[n,c]);return o.useMemo(()=>{r.forEach((i,x)=>r.set(x,!1))},[n]),o.useEffect(()=>{!n&&!r.size&&s&&s()},[n]),m==="popLayout"&&(e=f.jsx(D,{isPresent:n,children:e})),f.jsx(F.Provider,{value:u,children:e})};function T(){return new Map}const y=e=>e.key||"";function M(e){const t=[];return o.Children.forEach(e,n=>{o.isValidElement(n)&&t.push(n)}),t}const Z=({children:e,exitBeforeEnter:t,custom:n,initial:s=!0,onExitComplete:l,presenceAffectsLayout:p=!0,mode:m="sync"})=>{const r=o.useMemo(()=>M(e),[e]),d=r.map(y),c=o.useRef(!0),u=o.useRef(r),i=$(()=>new Map),[x,w]=o.useState(r),[g,j]=o.useState(r);A(()=>{c.current=!1,u.current=r;for(let h=0;h<g.length;h++){const a=y(g[h]);d.includes(a)?i.delete(a):i.get(a)!==!0&&i.set(a,!1)}},[g,d.length,d.join("-")]);const v=[];if(r!==x){let h=[...r];for(let a=0;a<g.length;a++){const C=g[a],b=y(C);d.includes(b)||(h.splice(a,0,C),v.push(C))}m==="wait"&&v.length&&(h=v),j(M(h)),w(r);return}const{forceRender:S}=o.useContext(V);return f.jsx(f.Fragment,{children:g.map(h=>{const a=y(h),C=r===g||d.includes(a),b=()=>{if(i.has(a))i.set(a,!0);else return;let R=!0;i.forEach(O=>{O||(R=!1)}),R&&(S==null||S(),j(u.current),l&&l())};return f.jsx(L,{isPresent:C,initial:!c.current||s?void 0:!1,custom:C?void 0:n,presenceAffectsLayout:p,mode:m,onExitComplete:C?void 0:b,children:h},a)})})},P=e=>{let t;const n=new Set,s=(c,u)=>{const i=typeof c=="function"?c(t):c;if(!Object.is(i,t)){const x=t;t=u??(typeof i!="object"||i===null)?i:Object.assign({},t,i),n.forEach(w=>w(t,x))}},l=()=>t,r={setState:s,getState:l,getInitialState:()=>d,subscribe:c=>(n.add(c),()=>n.delete(c))},d=t=e(s,l,r);return r},N=e=>e?P(e):P,H=e=>e;function K(e,t=H){const n=I.useSyncExternalStore(e.subscribe,()=>t(e.getState()),()=>t(e.getInitialState()));return I.useDebugValue(n),n}const k=e=>{const t=N(e),n=s=>K(t,s);return Object.assign(n,t),n},U=e=>e?k(e):k,_=U(e=>({products:[],product:{id:0,path:"",name:"",price:0,type:""},setProducts:t=>e({products:t}),setProduct:t=>e({product:t})})),q=({children:e})=>f.jsx(E.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{duration:.5,ease:"easeOut"},children:e}),Q=()=>f.jsx("div",{className:"w-16 h-16 border-4 border-t-black border-r-black rounded-full animate-spin"}),X=({children:e,className:t})=>f.jsx(E.div,{initial:{opacity:0,y:80},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.7},className:t,children:e});function G({title:e,titleId:t,...n},s){return o.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},n),e?o.createElement("title",{id:t},e):null,o.createElement("path",{d:"m11.645 20.91-.007-.003-.022-.012a15.247 15.247 0 0 1-.383-.218 25.18 25.18 0 0 1-4.244-3.17C4.688 15.36 2.25 12.174 2.25 8.25 2.25 5.322 4.714 3 7.688 3A5.5 5.5 0 0 1 12 5.052 5.5 5.5 0 0 1 16.313 3c2.973 0 5.437 2.322 5.437 5.25 0 3.925-2.438 7.111-4.739 9.256a25.175 25.175 0 0 1-4.244 3.17 15.247 15.247 0 0 1-.383.219l-.022.012-.007.004-.003.001a.752.752 0 0 1-.704 0l-.003-.001Z"}))}const J=o.forwardRef(G),Y=({id:e})=>{const[t,n]=o.useState(localStorage.getItem(`product/${e}/favorite`)==="true"),s=l=>{l.preventDefault(),l.stopPropagation(),n(p=>(localStorage.setItem(`product/${e}/favorite`,JSON.stringify(!p)),!p))};return f.jsx(E.div,{whileTap:{scale:.8},animate:{color:t?"#F44336":"#000"},transition:{duration:.3},children:f.jsx(J,{onClick:s,className:"w-[32px] h-[32px] cursor-pointer"})})};export{Z as A,X as F,Q as S,q as T,Y as a,_ as u};
//# sourceMappingURL=favorite-DiSErdyA.js.map
